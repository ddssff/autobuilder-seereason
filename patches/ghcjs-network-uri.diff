diff --git a/ghcjs.cabal b/ghcjs.cabal
index 4678efe..ecd9eb7 100644
--- a/ghcjs.cabal
+++ b/ghcjs.cabal
@@ -44,6 +44,10 @@ flag no-wrapper-install
   description: don't install wrapper scripts and add version numbers to the executable names
   default:            False
 
+flag network-uri
+ Description: Get Network.URI from the network-uri package
+ Default: True
+
 Library
     if os(Windows)
       cpp-options: -DWINDOWS
@@ -224,7 +228,6 @@ Executable ghcjs-boot
                       lens,
                       unordered-containers,
                       vector,
-                      network,
                       filepath             >= 1.3    && < 1.4,
                       text                 >= 0.11   && < 1.2,
                       bytestring           >= 0.10   && < 0.11,
@@ -243,6 +242,10 @@
                       time                 >= 1.4    && < 1.5,
                       unix-compat          >= 0.4    && < 0.5,
                       executable-path      >= 0      && < 0.1
+    if flag(network-uri)
+      Build-Depends: network-uri >= 2.6
+    else
+      Build-Depends: network < 2.6
 
 Executable ghcjs-patch
     if os(Windows)
@@ -256,7 +259,6 @@ Executable ghcjs-patch
                       lens,
                       unordered-containers,
                       vector,
-                      network,
                       filepath             >= 1.3    && < 1.4,
                       text                 >= 0.11   && < 1.2,
                       bytestring           >= 0.10   && < 0.11,
@@ -271,6 +273,10 @@ Executable ghcjs-patch
                       time                 >= 1.4    && < 1.5,
                       unix-compat          >= 0.4    && < 0.5,
                       executable-path      >= 0      && < 0.1
+    if flag(network-uri)
+      Build-Depends: network-uri >= 2.6
+    else
+      Build-Depends: network < 2.6
 
 Executable ghcjs-run
     if flag(compiler-only)
